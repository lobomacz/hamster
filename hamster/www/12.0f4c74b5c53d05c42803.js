(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{X3zk:function(t,n,e){"use strict";e.r(n),e.d(n,"LoginPageModule",function(){return p});var o=e("ofXK"),i=e("3Pt+"),a=e("TEn/"),s=e("tyNb"),r=e("mrSG"),c=e("AytR"),d=e("fXoL"),l=e("lGQG");const h=["usuario"],u=["clave"],b=[{path:"",component:(()=>{class t{constructor(t,n,e,o){this._auth=t,this._router=n,this.toastCtrl=e,this.platform=o,this.AppName=c.a.appName,this.plataforma="desktop",this.ApiUrl=c.a.appUrl}ngOnInit(){this.plataforma=this.platform.is("android")?"android":"desktop"}userLogin(){if(this.emailField.valid&&this.passwordField.valid){let t={username:this.nombreusuario,password:this.contrasena};this.platform.is("desktop")||this.platform.is("mobileweb")?this._auth.Autenticar(t).subscribe(n=>{let e=Object.assign({},n.body);void 0!==e&&null!=e.id?(e.password=t.password,this._auth.setAuthToken(this.nombreusuario,this.contrasena).then(()=>{this._auth.setSession(e).then(()=>{let t="\xa1HOLA, ".concat(e.first_name," ",e.last_name,"!").toUpperCase();this.welcomeToast(t)})})):this.showToast("Acceso Denegado")},t=>{console.error("Error: ".concat(t)),this.showToast(t)}):this._auth.AutenticarNative(t).then(n=>{let e=Object.assign({},JSON.parse(n.data));void 0!==e&&null!=e.id?(e.password=t.password,this._auth.setAuthToken(this.nombreusuario,this.contrasena).then(()=>{this._auth.setSession(e).then(()=>{let t="\xa1HOLA, ".concat(e.first_name," ",e.last_name,"!").toUpperCase();this.welcomeToast(t)})})):this.showToast("Acceso Denegado")}).catch(t=>{console.error("Error: ".concat(t.error)),this.showToast(t.error)})}else this.showToast("Datos No V\xe1lidos")}showToast(t){return Object(r.a)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:t,position:"middle",duration:2e3})).present()})}welcomeToast(t){return Object(r.a)(this,void 0,void 0,function*(){const n=yield this.toastCtrl.create({message:t,position:"middle",duration:2e3});n.present(),n.onDidDismiss().then(()=>{this._router.navigateByUrl("/inicio")})})}}return t.\u0275fac=function(n){return new(n||t)(d.Kb(l.a),d.Kb(s.g),d.Kb(a.Q),d.Kb(a.M))},t.\u0275cmp=d.Eb({type:t,selectors:[["app-login"]],viewQuery:function(t,n){if(1&t&&(d.qc(h,1),d.qc(u,1)),2&t){let t;d.hc(t=d.Wb())&&(n.emailField=t.first),d.hc(t=d.Wb())&&(n.passwordField=t.first)}},decls:22,vars:6,consts:[[1,"login-content"],[1,"login-item"],["type","email","maxlength","50","name","username","placeholder","Usuario","required","",3,"ngModel","ngModelChange"],["usuario","ngModel"],["slot","end","name","person-outline"],["type","password","name","password","maxlength","25","minlength","8","placeholder","Contrase\xf1a","required","",3,"ngModel","ngModelChange"],["clave","ngModel"],["slot","end","name","key-outline"],["expand","block",1,"login-button",3,"click"],["slot","end","name","enter-outline"]],template:function(t,n){1&t&&(d.Nb(0,"ion-header"),d.Nb(1,"ion-toolbar"),d.Nb(2,"ion-title"),d.mc(3),d.Mb(),d.Mb(),d.Mb(),d.Nb(4,"ion-content",0),d.Nb(5,"ion-card"),d.Nb(6,"ion-card-header"),d.Nb(7,"ion-card-title"),d.mc(8," Ingreso de Usuarios "),d.Mb(),d.Mb(),d.Nb(9,"ion-card-content"),d.Nb(10,"ion-item",1),d.Nb(11,"ion-input",2,3),d.Vb("ngModelChange",function(t){return n.nombreusuario=t}),d.Mb(),d.Lb(13,"ion-icon",4),d.Mb(),d.Nb(14,"ion-item",1),d.Nb(15,"ion-input",5,6),d.Vb("ngModelChange",function(t){return n.contrasena=t}),d.Mb(),d.Lb(17,"ion-icon",7),d.Mb(),d.Lb(18,"ion-item",1),d.Nb(19,"ion-button",8),d.Vb("click",function(){return n.userLogin()}),d.mc(20,"Entrar "),d.Lb(21,"ion-icon",9),d.Mb(),d.Mb(),d.Mb(),d.Mb()),2&t&&(d.zb(3),d.oc("",n.AppName,"\u2014Login"),d.zb(2),d.Bb("login-card ","android"==n.plataforma?"login-card__narrow":"login-card__wide",""),d.zb(6),d.dc("ngModel",n.nombreusuario),d.zb(4),d.dc("ngModel",n.contrasena))},directives:[a.q,a.I,a.H,a.n,a.h,a.j,a.l,a.i,a.t,a.s,a.P,i.b,i.i,i.f,i.g,a.r,i.c,a.f],styles:[".login-button[_ngcontent-%COMP%]{width:40%;margin:.5em auto}.login-content[_ngcontent-%COMP%]{position:relative}.login-card[_ngcontent-%COMP%]{display:inline-block;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.login-card__wide[_ngcontent-%COMP%]{width:60%}@media screen and (max-width:80em){.login-card__wide[_ngcontent-%COMP%]{width:60%}}@media screen and (min-width:79em){.login-card__wide[_ngcontent-%COMP%]{width:30%}}.login-card__narrow[_ngcontent-%COMP%]{width:80%}@media screen and (max-width:90em){.login-card__narrow[_ngcontent-%COMP%]{width:80%}}@media screen and (min-width:89.9em){.login-card__narrow[_ngcontent-%COMP%]{width:50%}}.login-item[_ngcontent-%COMP%]:not(:first-child){margin-top:2rem}"]}),t})()}];let m=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=d.Ib({type:t}),t.\u0275inj=d.Hb({imports:[[s.i.forChild(b)],s.i]}),t})(),p=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=d.Ib({type:t}),t.\u0275inj=d.Hb({imports:[[o.b,i.a,a.J,m]]}),t})()}}]);