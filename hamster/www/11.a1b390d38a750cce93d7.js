(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{MpVM:function(i,o,t){"use strict";t.r(o),t.d(o,"InicioPageModule",function(){return D});var e=t("ofXK"),n=t("3Pt+"),c=t("TEn/"),r=t("tyNb"),s=t("mrSG"),a=t("myAU"),b=t("fXoL"),l=t("EnSQ"),h=t("lGQG");const u=function(i){return["/inicio/ver/",i]};function d(i,o){if(1&i&&(b.Nb(0,"ion-item",1),b.Lb(1,"ion-icon",2),b.Nb(2,"ion-label",3),b.Nb(3,"h2"),b.mc(4),b.Yb(5,"uppercase"),b.Mb(),b.Nb(6,"ion-note",4),b.mc(7),b.Yb(8,"date"),b.Mb(),b.Nb(9,"ion-text",5),b.Nb(10,"p"),b.mc(11),b.Yb(12,"uppercase"),b.Mb(),b.Mb(),b.Mb(),b.Nb(13,"ion-label"),b.Nb(14,"h3"),b.mc(15),b.Yb(16,"number"),b.Mb(),b.Mb(),b.Mb()),2&i){const i=b.Xb();b.dc("routerLink",b.gc(17,u,i.contribucion.id))("detail",!0),b.zb(1),b.ec("name",i.icono),b.zb(3),b.oc(" ",b.Zb(5,7,i.beneficiario.primer_nombre.concat(" ",i.beneficiario.primer_apellido))," "),b.zb(3),b.nc(b.ac(8,9,i.contribucion.fecha,"d-MM-yyyy")),b.zb(4),b.oc(" ",b.Zb(12,12,i.funcionario.institucion.siglas)," "),b.zb(4),b.oc("C$ ",b.ac(16,14,i.contribucion.monto,"1.2-2"),"")}}let p=(()=>{class i{constructor(i,o){this._data=i,this.platform=o}ngOnInit(){this.icono=this._data.Tipos[this.contribucion.tipo].icon,this.platform.is("desktop")||this.platform.is("mobileweb")?(this._data.getBeneficiarioById(this.contribucion.beneficiario,this.token).subscribe(i=>{this.beneficiario=Object.assign({},i.body)}),this._data.getFuncionarioById(this.contribucion.funcionario,this.token).subscribe(i=>{this.funcionario=Object.assign({},i.body)})):(this._data.getBeneficiarioByIdNative(this.contribucion.beneficiario,this.token).then(i=>{this.beneficiario=Object.assign({},JSON.parse(i.data))}),this._data.getFuncionarioByIdNative(this.contribucion.funcionario,this.token).then(i=>{this.funcionario=Object.assign({},JSON.parse(i.data))}))}}return i.\u0275fac=function(o){return new(o||i)(b.Kb(l.a),b.Kb(c.M))},i.\u0275cmp=b.Eb({type:i,selectors:[["app-item-contribucion"]],inputs:{contribucion:"contribucion",token:"token"},decls:1,vars:1,consts:[[3,"routerLink","detail",4,"ngIf"],[3,"routerLink","detail"],["slot","start",1,"contrib-item__read",3,"name"],[1,"ion-text-wrap"],["slot","end"],["color","success"]],template:function(i,o){1&i&&b.lc(0,d,17,19,"ion-item",0),2&i&&b.dc("ngIf",o.contribucion&&o.beneficiario&&o.funcionario)},directives:[e.k,c.t,c.N,r.h,c.r,c.v,c.y,c.F],pipes:[e.n,e.d,e.e],styles:[".contrib-item__unread[_ngcontent-%COMP%]{color:--ion-color-success}.contrib-item__read[_ngcontent-%COMP%]{color:--ion-color-primary}.contrib-item__concept[_ngcontent-%COMP%]{text-overflow:ellipsis}"]}),i})();const m=["searchField"];function f(i,o){if(1&i&&b.Lb(0,"app-item-contribucion",27),2&i){const i=o.$implicit,t=b.Xb(2);b.dc("contribucion",i)("token",t.token)}}function M(i,o){if(1&i){const i=b.Ob();b.Nb(0,"ion-content"),b.Nb(1,"ion-item"),b.Nb(2,"ion-text",10),b.Nb(3,"h5"),b.mc(4),b.Yb(5,"uppercase"),b.Mb(),b.Mb(),b.Mb(),b.Nb(6,"ion-item"),b.Nb(7,"ion-input",11,12),b.Vb("ngModelChange",function(o){return b.ic(i),b.Xb().cedula=o}),b.Mb(),b.Nb(9,"ion-button",13),b.Vb("click",function(){return b.ic(i),b.Xb().ContribucionesPorBeneficiario()}),b.Lb(10,"ion-icon",14),b.Mb(),b.Mb(),b.Nb(11,"ion-item-divider",15),b.Nb(12,"ion-label"),b.mc(13,"Leyenda"),b.Mb(),b.Mb(),b.Nb(14,"ion-grid"),b.Nb(15,"ion-row"),b.Nb(16,"ion-col"),b.Nb(17,"ion-item"),b.Lb(18,"ion-icon",16),b.Nb(19,"ion-label",17),b.mc(20,"Dinero"),b.Mb(),b.Mb(),b.Mb(),b.Nb(21,"ion-col"),b.Nb(22,"ion-item"),b.Lb(23,"ion-icon",18),b.Nb(24,"ion-label",17),b.mc(25,"Medicinas"),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Nb(26,"ion-row"),b.Nb(27,"ion-col"),b.Nb(28,"ion-item"),b.Lb(29,"ion-icon",19),b.Nb(30,"ion-label",17),b.mc(31,"Provisi\xf3n"),b.Mb(),b.Mb(),b.Mb(),b.Nb(32,"ion-col"),b.Nb(33,"ion-item"),b.Lb(34,"ion-icon",20),b.Nb(35,"ion-label",17),b.mc(36,"Pasajes"),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Nb(37,"ion-row"),b.Nb(38,"ion-col"),b.Nb(39,"ion-item"),b.Lb(40,"ion-icon",21),b.Nb(41,"ion-label",17),b.mc(42,"Materiales"),b.Mb(),b.Mb(),b.Mb(),b.Nb(43,"ion-col"),b.Nb(44,"ion-item"),b.Lb(45,"ion-icon",22),b.Nb(46,"ion-label",17),b.mc(47,"Art. Escolares"),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Nb(48,"ion-row"),b.Nb(49,"ion-col",23),b.Nb(50,"ion-item"),b.Lb(51,"ion-icon",24),b.Nb(52,"ion-label",17),b.mc(53,"Otro"),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Nb(54,"ion-item-divider",15),b.Nb(55,"ion-label"),b.mc(56,"Lista"),b.Mb(),b.Mb(),b.Nb(57,"ion-refresher",25),b.Vb("ionRefresh",function(o){return b.ic(i),b.Xb().refresh(o)}),b.Lb(58,"ion-refresher-content"),b.Mb(),b.Nb(59,"ion-list"),b.lc(60,f,1,2,"app-item-contribucion",26),b.Mb(),b.Mb()}if(2&i){const i=b.Xb();b.zb(4),b.nc(b.Zb(5,3,"Instituciones auton\xf3micas")),b.zb(3),b.dc("ngModel",i.cedula),b.zb(53),b.dc("ngForOf",i.contribuciones)}}let g=(()=>{class i{constructor(i,o,t,e,n){this._data=i,this._auth=o,this._router=t,this.toastCtrl=e,this.platform=n}refresh(i){this.LlenaDatos(!0,i)}LlenaDatos(i=!1,o){this.platform.is("desktop")||this.platform.is("mobileweb")?this.filtrar?this._data.getContribucionesPorBeneficiario(this.cedula.toUpperCase(),this.token).subscribe(i=>{i.body&&i.body.length>0&&this.FillIfExists(i.body)},i=>{console.error("Error: ".concat(i)),this.showToast(i)}):this._data.getContribuciones(this.token).subscribe(t=>{this.contribuciones=t.body,this._auth.updateSession().then(()=>{}),1==i&&o.detail.complete()},i=>{console.error("Error: ".concat(i)),this.showToast(i,!1)}):this.filtrar?this._data.getContribPorBenefNative(this.cedula.toUpperCase(),this.token).then(i=>{let o=JSON.parse(i.data);this.FillIfExists(o)}).catch(i=>{console.error("Error: ".concat(i.error)),this.showToast(i.error)}):this._data.getContribucionesNative(this.token).then(t=>{this.contribuciones=JSON.parse(t.data),this._auth.updateSession().then(()=>{}),1==i&&o.detail.complete()}).catch(i=>{console.error("Error: ".concat(i.error)),this.showToast(i.error)})}ngOnInit(){this.filtrar=!1,this.CheckSession()}ContribucionesPorBeneficiario(){this.cedulaField.valid?(this.filtrar=!0,this.LlenaDatos()):this.showToast("Valor Incorrecto")}FillIfExists(i){i&&i.length>0?this.contribuciones=i:this.showToast("No hay contribuciones para el beneficiario.")}CheckSession(){this._auth.getSession().then(i=>{if(i.value){let o=parseInt(i.value);this._auth.getAuthToken().then(i=>{this.token=i.value;let t=new Date(o);a.a.CheckExpiration(t)?this.LlenaDatos():this.showToast("Sesi\xf3n Expirada",!0)}).catch(i=>{this.showToast(i,!0)})}else this.showToast("Acceso Denegado",!0)}).catch(i=>{this.showToast(i,!0)})}Logout(){this._auth.UserLogout().then(()=>{this.showToast("\xa1Adi\xf3s!",!0)}).catch(i=>{this.showToast(i)})}showToast(i,o=!1){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.toastCtrl.create({message:i,position:"middle",duration:2e3});o&&t.onDidDismiss().then(()=>{this._router.navigateByUrl("/hamster")}),t.present()})}}return i.\u0275fac=function(o){return new(o||i)(b.Kb(l.a),b.Kb(h.a),b.Kb(r.g),b.Kb(c.Q),b.Kb(c.M))},i.\u0275cmp=b.Eb({type:i,selectors:[["app-inicio"]],viewQuery:function(i,o){if(1&i&&b.qc(m,1),2&i){let i;b.hc(i=b.Wb())&&(o.cedulaField=i.first)}},decls:14,vars:5,consts:[[3,"translucent"],["slot","start"],[3,"click"],["name","exit-outline","slot","icon-only"],["slot","end"],["routerLink","/beneficiarios","fill","clear"],["name","people-outline","slot","icon-only"],["routerLink","/inicio/nuevo","fill","clear"],["name","add-outline","slot","icon-only"],[4,"ngIf"],["color","dark"],["name","txtCedula","inputmode","text","slot","end","type","text","pattern","[0-9]{3}-[0-9]{6}-[0-9A-Za-z]{5}","maxlength","16","minlength","16","color","primary","placeholder","000-000000-XXXXX",1,"search-input",3,"ngModel","ngModelChange"],["searchField","ngModel"],["color","light","slot","end",3,"click"],["slot","icon-only","name","search-outline"],[1,"header-divider"],["name","cash-outline"],[1,"legend-label"],["name","medkit-outline"],["name","cart-outline"],["name","bus-outline"],["name","hammer-outline"],["name","library-outline"],["size","6"],["name","flower-outline"],["slot","fixed",3,"ionRefresh"],[3,"contribucion","token",4,"ngFor","ngForOf"],[3,"contribucion","token"]],template:function(i,o){1&i&&(b.Nb(0,"ion-header",0),b.Nb(1,"ion-toolbar"),b.Nb(2,"ion-buttons",1),b.Nb(3,"ion-button",2),b.Vb("click",function(){return o.Logout()}),b.Lb(4,"ion-icon",3),b.Mb(),b.Mb(),b.Nb(5,"ion-title"),b.mc(6),b.Yb(7,"uppercase"),b.Mb(),b.Nb(8,"ion-buttons",4),b.Nb(9,"ion-button",5),b.Lb(10,"ion-icon",6),b.Mb(),b.Nb(11,"ion-button",7),b.Lb(12,"ion-icon",8),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.lc(13,M,61,5,"ion-content",9)),2&i&&(b.dc("translucent",!0),b.zb(6),b.nc(b.Zb(7,3,"Ayudas Sociales")),b.zb(7),b.dc("ngIf",o.contribuciones))},directives:[c.q,c.I,c.g,c.f,c.r,c.H,c.N,r.h,e.k,c.n,c.t,c.F,c.s,c.P,n.h,n.b,n.c,n.f,n.g,c.u,c.v,c.p,c.C,c.m,c.z,c.A,c.w,e.j,p],pipes:[e.n],styles:[".legend-label[_ngcontent-%COMP%]{margin-left:2rem}.header-divider[_ngcontent-%COMP%]{background-color:#3880ff;color:#fff}.search-input[_ngcontent-%COMP%]{border:1px solid #000;border-radius:.5rem;text-align:right}"]}),i})();function N(i,o){if(1&i&&(b.Nb(0,"ion-card",3),b.Nb(1,"ion-card-header"),b.Nb(2,"ion-card-title"),b.mc(3),b.Yb(4,"uppercase"),b.Mb(),b.Nb(5,"ion-card-subtitle"),b.mc(6),b.Yb(7,"uppercase"),b.Mb(),b.Mb(),b.Nb(8,"ion-card-content"),b.Lb(9,"ion-icon",4),b.Nb(10,"ion-label",5),b.mc(11),b.Yb(12,"uppercase"),b.Yb(13,"date"),b.Mb(),b.Lb(14,"ion-item-divider"),b.Nb(15,"ion-item"),b.Nb(16,"h3"),b.mc(17),b.Yb(18,"uppercase"),b.Mb(),b.Mb(),b.Nb(19,"ion-item"),b.Nb(20,"h3"),b.mc(21),b.Yb(22,"uppercase"),b.Mb(),b.Mb(),b.Nb(23,"ion-item"),b.Nb(24,"h3"),b.mc(25),b.Yb(26,"uppercase"),b.Mb(),b.Mb(),b.Nb(27,"ion-item"),b.Nb(28,"h2"),b.mc(29),b.Yb(30,"uppercase"),b.Mb(),b.Nb(31,"ion-text",6),b.Nb(32,"h1"),b.mc(33),b.Yb(34,"number"),b.Mb(),b.Mb(),b.Mb(),b.Nb(35,"ion-item"),b.Nb(36,"h2"),b.mc(37),b.Mb(),b.mc(38,"\xa0 "),b.Nb(39,"ion-text",7),b.mc(40),b.Yb(41,"uppercase"),b.Mb(),b.Mb(),b.Mb(),b.Mb()),2&i){const i=b.Xb();b.zb(3),b.nc(b.Zb(4,12,i.beneficiario.primer_nombre.concat(" ",i.beneficiario.primer_apellido))),b.zb(3),b.oc(" ",b.Zb(7,14,i.beneficiario.cedula)," "),b.zb(3),b.ec("name",i.icono),b.zb(2),b.pc("",b.Zb(12,16,"Fecha: "),"",b.ac(13,18,i.contribucion.fecha,"d-MM-y"),""),b.zb(6),b.nc(b.Zb(18,21,"Concepto: "+i.contribucion.concepto)),b.zb(4),b.oc(" ",b.Zb(22,23,"Entregado por: "+i.funcionario.nombre+" "+i.funcionario.apellido)," "),b.zb(4),b.oc(" ",b.Zb(26,25,"Instituci\xf3n: "+i.funcionario.institucion.nombre)," "),b.zb(4),b.oc("",b.Zb(30,27,"Monto: C$"),"\xa0"),b.zb(4),b.nc(b.ac(34,29,i.contribucion.monto,"1.2-2")),b.zb(4),b.oc(" ","Digitador: "," "),b.zb(3),b.oc(" ",b.Zb(41,32,i.contribucion.digitador)," ")}}let y=(()=>{class i{constructor(i,o,t,e,n,c){this._auth=i,this._data=o,this._router=t,this._activatedRoute=e,this.toastCtrl=n,this.platform=c}ngOnInit(){this.CheckSession()}CheckSession(){this._auth.getSession().then(i=>{if(i.value){let o=parseInt(i.value);this._auth.getAuthToken().then(i=>{this.token=i.value;let t=new Date(o);a.a.CheckExpiration(t)?this.LlenaDatos():this.showToast("Sesi\xf3n Expirada",!0)}).catch(i=>{this.showToast(i,!0)})}else this.showToast("Acceso Denegado",!0)}).catch(i=>{this.showToast(i,!0)})}LlenaDatos(){let i=this._activatedRoute.snapshot.paramMap.get("id");this.platform.is("desktop")||this.platform.is("mobileweb")?this._data.getContribucionById(parseInt(i),this.token).subscribe(i=>{this.contribucion=Object.assign({},i.body),this._data.getBeneficiarioById(this.contribucion.beneficiario,this.token).subscribe(i=>{this.beneficiario=Object.assign({},i.body)},i=>{console.error("Error: ".concat(i)),this.showToast(i)}),this._data.getFuncionarioById(this.contribucion.funcionario,this.token).subscribe(i=>{this.funcionario=Object.assign({},i.body)},i=>{console.error("Error: ".concat(i)),this.showToast(i)}),this.Complementos()},i=>{console.error("Error: ".concat(i)),this.showToast(i)}):this._data.getContribucionByIdNative(parseInt(i),this.token).then(i=>{i.data&&(this.contribucion=Object.assign({},JSON.parse(i.data)),this._data.getBeneficiarioByIdNative(this.contribucion.beneficiario,this.token).then(i=>{i.data&&(this.beneficiario=Object.assign({},JSON.parse(i.data)))}).catch(i=>{console.error("Error: ".concat(i.error)),this.showToast(i.error)}),this._data.getFuncionarioByIdNative(this.contribucion.funcionario,this.token).then(i=>{i.data&&(this.funcionario=Object.assign({},JSON.parse(i.data)))}).catch(i=>{console.error("Error: ".concat(i.error)),this.showToast(i.error)}),this.Complementos())}).catch(i=>{})}Complementos(){this._auth.updateSession().then(()=>{}),this.icono=this._data.Tipos[this.contribucion.tipo].icon}showToast(i,o=!1){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.toastCtrl.create({message:i,duration:2e3,position:"middle"});1==o&&t.onDidDismiss().then(()=>{this._router.navigateByUrl("/hamster")}),t.present()})}}return i.\u0275fac=function(o){return new(o||i)(b.Kb(h.a),b.Kb(l.a),b.Kb(r.g),b.Kb(r.a),b.Kb(c.Q),b.Kb(c.M))},i.\u0275cmp=b.Eb({type:i,selectors:[["app-contribucion"]],decls:9,vars:4,consts:[["slot","start"],["defaultHref","/inicio"],["class","card",4,"ngIf"],[1,"card"],["size","large",1,"card-icon",3,"name"],[1,"card-date"],["color","primary"],["color","secondary"]],template:function(i,o){1&i&&(b.Nb(0,"ion-header"),b.Nb(1,"ion-toolbar"),b.Nb(2,"ion-buttons",0),b.Lb(3,"ion-back-button",1),b.Mb(),b.Nb(4,"ion-title"),b.mc(5),b.Yb(6,"uppercase"),b.Mb(),b.Mb(),b.Mb(),b.Nb(7,"ion-content"),b.lc(8,N,42,34,"ion-card",2),b.Mb()),2&i&&(b.zb(5),b.oc(" ",b.Zb(6,2,"Detalle de Ayuda")," "),b.zb(3),b.dc("ngIf",o.contribucion&&o.beneficiario&&o.funcionario))},directives:[c.q,c.I,c.g,c.c,c.d,c.H,c.n,e.k,c.h,c.j,c.l,c.k,c.i,c.r,c.v,c.u,c.t,c.F],pipes:[e.n,e.d,e.e],styles:[".card-icon[_ngcontent-%COMP%]{float:left}.card-date[_ngcontent-%COMP%]{float:right}"]}),i})();var v=t("AytR");const k=["dtFecha"],_=["optBeneficiario"],w=["optTipoAporte"],C=["txtMonto"],T=["txtConcepto"],z=["optFuncionario"];function O(i,o){if(1&i&&(b.Nb(0,"ion-select-option",25),b.mc(1),b.Yb(2,"uppercase"),b.Mb()),2&i){const i=o.$implicit;b.ec("value",i.cedula),b.zb(1),b.nc(b.Zb(2,2,i.primer_nombre+" "+i.primer_apellido+" "+i.cedula))}}function F(i,o){if(1&i&&(b.Nb(0,"ion-select-option",25),b.mc(1),b.Yb(2,"uppercase"),b.Mb()),2&i){const i=o.$implicit,t=b.Xb(2);b.ec("value",i),b.zb(1),b.nc(b.Zb(2,2,t.tipos[i].label))}}function L(i,o){if(1&i&&(b.Nb(0,"ion-select-option",25),b.mc(1),b.Yb(2,"uppercase"),b.Yb(3,"uppercase"),b.Mb()),2&i){const i=o.$implicit;b.ec("value",i.id),b.zb(1),b.pc(" ",b.Zb(2,3,i.nombre+" "+i.apellido),"\u2014",b.Zb(3,5,i.institucion.siglas)," ")}}const I=function(){return["/beneficiarios/nuevo/contrib"]};function x(i,o){if(1&i){const i=b.Ob();b.Nb(0,"ion-content"),b.Nb(1,"ion-card"),b.Nb(2,"ion-card-content"),b.Nb(3,"ion-text",3),b.Nb(4,"h4",4),b.mc(5," Llene los campos con los datos correspondientes y presione el bot\xf3n para guardar el registro en la base central. "),b.Mb(),b.Mb(),b.Lb(6,"ion-item-divider"),b.Nb(7,"ion-text",5),b.Nb(8,"h5",4),b.mc(9," Verifique que la informaci\xf3n sea correcta. Una vez enviado, no podr\xe1 modificar el registro sin ayuda del administrador. "),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Nb(10,"ion-item",6),b.Nb(11,"ion-label",7),b.mc(12),b.Yb(13,"uppercase"),b.Mb(),b.Nb(14,"ion-datetime",8,9),b.Vb("ngModelChange",function(o){return b.ic(i),b.Xb().contribucion.fecha=o}),b.Mb(),b.Mb(),b.Nb(16,"ion-item",6),b.Nb(17,"ion-label",7),b.mc(18),b.Yb(19,"uppercase"),b.Mb(),b.Nb(20,"ion-select",10,11),b.Vb("ngModelChange",function(o){return b.ic(i),b.Xb().contribucion.beneficiario=o}),b.lc(22,O,3,4,"ion-select-option",12),b.Mb(),b.Nb(23,"ion-button",13),b.Lb(24,"ion-icon",14),b.Mb(),b.Mb(),b.Nb(25,"ion-item",6),b.Nb(26,"ion-label",7),b.mc(27),b.Yb(28,"uppercase"),b.Mb(),b.Nb(29,"ion-select",15,16),b.Vb("ngModelChange",function(o){return b.ic(i),b.Xb().contribucion.tipo=o}),b.lc(31,F,3,4,"ion-select-option",12),b.Mb(),b.Mb(),b.Nb(32,"ion-item",6),b.Nb(33,"ion-label",7),b.mc(34),b.Yb(35,"uppercase"),b.Mb(),b.Nb(36,"ion-input",17,18),b.Vb("ngModelChange",function(o){return b.ic(i),b.Xb().contribucion.monto=o}),b.Mb(),b.Mb(),b.Nb(38,"ion-item",6),b.Nb(39,"ion-label",7),b.mc(40),b.Yb(41,"uppercase"),b.Mb(),b.Nb(42,"ion-textarea",19,20),b.Vb("ngModelChange",function(o){return b.ic(i),b.Xb().contribucion.concepto=o}),b.Mb(),b.Mb(),b.Nb(44,"ion-item",6),b.Nb(45,"ion-label",7),b.mc(46),b.Yb(47,"uppercase"),b.Mb(),b.Nb(48,"ion-select",21,22),b.Vb("ngModelChange",function(o){return b.ic(i),b.Xb().contribucion.funcionario=o}),b.lc(50,L,4,7,"ion-select-option",12),b.Mb(),b.Mb(),b.Nb(51,"ion-item"),b.Nb(52,"ion-button",23),b.Vb("click",function(){return b.ic(i),b.Xb().showAlert()}),b.mc(53),b.Yb(54,"uppercase"),b.Lb(55,"ion-icon",24),b.Mb(),b.Mb(),b.Mb()}if(2&i){const i=b.Xb();b.zb(12),b.nc(b.Zb(13,21,"fecha")),b.zb(2),b.ec("max",i.hoy),b.ec("value",i.hoy),b.dc("ngModel",i.contribucion.fecha)("monthShortNames",i.meses)("dayNames",i.dias),b.zb(4),b.nc(b.Zb(19,23,"Beneficiario")),b.zb(2),b.dc("ngModel",i.contribucion.beneficiario),b.zb(2),b.dc("ngForOf",i.beneficiarios),b.zb(1),b.dc("routerLink",b.fc(35,I)),b.zb(4),b.nc(b.Zb(28,25,"Tipo")),b.zb(2),b.dc("ngModel",i.contribucion.tipo),b.zb(2),b.dc("ngForOf",i.keyTipo),b.zb(3),b.oc("",b.Zb(35,27,"Monto")," C$"),b.zb(2),b.dc("ngModel",i.contribucion.monto),b.zb(4),b.nc(b.Zb(41,29,"Concepto")),b.zb(2),b.dc("ngModel",i.contribucion.concepto),b.zb(4),b.nc(b.Zb(47,31,"Funcionario")),b.zb(2),b.dc("ngModel",i.contribucion.funcionario),b.zb(2),b.dc("ngForOf",i.funcionarios),b.zb(3),b.oc(" ",b.Zb(54,33,"Guardar"),"\xa0 ")}}const E=[{path:"",component:g},{path:"ver/:id",component:y},{path:"nuevo",component:(()=>{class i{constructor(i,o,t,e,n,c){this._auth=i,this._data=o,this._router=t,this._toastCtrl=e,this._alertCtrl=n,this.platform=c,this.AppName=v.a.appName,this.digitador=255,this.meses=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],this.dias=["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"]}ngOnInit(){this.CheckSession()}CheckSession(){this._auth.getSession().then(i=>{if(i.value){let o=parseInt(i.value);this._auth.getAuthToken().then(i=>{this.token=i.value;let t=new Date(o);a.a.CheckExpiration(t)?this.LlenaDatos():this.showToast("Sesi\xf3n Expirada",!0)}).catch(i=>{this.showToast(i,!0)})}else this.showToast("Acceso Denegado",!0)}).catch(i=>{this.showToast(i,!0)})}LlenaDatos(){this.hoy=(new Date).toISOString(),this.contribucion={id:null,fecha:this.hoy,beneficiario:null,tipo:null,monto:null,concepto:null,funcionario:null,digitador:null,creado:this.hoy},this._auth.updateSession().then(()=>{}),this.tipos=this._data.Tipos,this.keyTipo=Object.keys(this.tipos),this.platform.is("desktop")||this.platform.is("mobileweb")?(this._data.getBeneficiarios(this.token).subscribe(i=>{this.beneficiarios=i.body},i=>{console.error("Error: ".concat(i)),this.showToast(i)}),this._data.getInstituciones(this.token).subscribe(i=>{this.instituciones=i.body},i=>{console.error("Error: ".concat(i)),this.showToast(i)}),this._data.getFuncionarios(this.token).subscribe(i=>{this.funcionarios=i.body},i=>{console.error("Error: ".concat(i)),this.showToast(i)})):(this._data.getBeneficiariosNative(this.token).then(i=>{i.data&&(this.beneficiarios=JSON.parse(i.data))}).catch(i=>{console.error("Error: ".concat(i.error)),this.showToast(i.error)}),this._data.getInstitucionesNative(this.token).then(i=>{i.data&&(this.instituciones=JSON.parse(i.data))}).catch(i=>{console.error("Error: ".concat(i.error)),this.showToast(i.error)}),this._data.getFuncionariosNative(this.token).then(i=>{i.data&&(this.funcionarios=JSON.parse(i.data))}).catch(i=>{console.error("Error: ".concat(i.error)),this.showToast(i.error)}))}showToast(i,o=!1,t){return Object(s.a)(this,void 0,void 0,function*(){const e=yield this._toastCtrl.create({message:i,duration:2e3,position:"middle"});1==o&&e.onDidDismiss().then(()=>{this._router.navigateByUrl(t||"/hamster")}),e.present()})}showAlert(){return Object(s.a)(this,void 0,void 0,function*(){if(this.Validar()){const i=yield this._alertCtrl.create({header:"Confirma Guardar",message:"Verifique que los datos son correctos. \xbfDesea continuar?",buttons:[{text:"Si",handler:()=>{this.Guardar()}},{text:"No",role:"cancel"}]});yield i.present()}else this.showToast("Datos No V\xe1lidos")})}Guardar(){this.contribucion.fecha=a.a.DateFormat(this.contribucion.fecha),this.platform.is("desktop")||this.platform.is("mobileweb")?this._data.newContribucion(this.contribucion,this.token).subscribe(i=>{i.ok&&this.showToast("Registro Guardado",!0,"/inicio")},i=>{console.error("Error: ".concat(i)),this.showToast(i)}):this._data.newContribucionNative(this.contribucion,this.token).then(i=>{200==i.status&&this.showToast("Registro Guardado",!0,"/inicio")}).catch(i=>{console.error("Error: ".concat(i.error)),this.showToast(i.error)})}Validar(){let i=!1;return this.dateField.valid&&this.benefField.valid&&this.tipoField.valid&&this.montoField.valid&&this.conecptoField.valid&&this.funcionarioField.valid&&(i=!0),i}}return i.\u0275fac=function(o){return new(o||i)(b.Kb(h.a),b.Kb(l.a),b.Kb(r.g),b.Kb(c.Q),b.Kb(c.a),b.Kb(c.M))},i.\u0275cmp=b.Eb({type:i,selectors:[["app-nueva-contribucion"]],viewQuery:function(i,o){if(1&i&&(b.qc(k,1),b.qc(_,1),b.qc(w,1),b.qc(C,1),b.qc(T,1),b.qc(z,1)),2&i){let i;b.hc(i=b.Wb())&&(o.dateField=i.first),b.hc(i=b.Wb())&&(o.benefField=i.first),b.hc(i=b.Wb())&&(o.tipoField=i.first),b.hc(i=b.Wb())&&(o.montoField=i.first),b.hc(i=b.Wb())&&(o.conecptoField=i.first),b.hc(i=b.Wb())&&(o.funcionarioField=i.first)}},decls:8,vars:4,consts:[["slot","start"],["defaultHref","/inicio"],[4,"ngIf"],["color","dark"],[1,"uppercase"],["color","secondary"],[1,"field-item"],["position","stacked"],["displayFormat","DDDD, MMM D, YYYY","doneText","Hecho","cancelText","Cancelar","name","fecha","type","date","required","",3,"ngModel","max","value","monthShortNames","dayNames","ngModelChange"],["dtFecha","ngModel"],["interface","action-sheet","name","beneficiario","required","",3,"ngModel","ngModelChange"],["optBeneficiario","ngModel"],[3,"value",4,"ngFor","ngForOf"],["fill","clear","slot","end",3,"routerLink"],["slot","icon-only","name","add-outline"],["interface","action-sheet","name","tipoAporte","required","",3,"ngModel","ngModelChange"],["optTipoAporte","ngModel"],["type","number","name","monto","inputmode","numeric","required","",3,"ngModel","ngModelChange"],["txtMonto","ngModel"],["name","concepto","maxlength","150","cols","50","rows","3","inputmode","text","required","",3,"ngModel","ngModelChange"],["txtConcepto","ngModel"],["interface","action-sheet","name","funcionario","required","",3,"ngModel","ngModelChange"],["optFuncionario","ngModel"],["size","big",3,"click"],["name","save-outline"],[3,"value"]],template:function(i,o){1&i&&(b.Nb(0,"ion-header"),b.Nb(1,"ion-toolbar"),b.Nb(2,"ion-buttons",0),b.Lb(3,"ion-back-button",1),b.Mb(),b.Nb(4,"ion-title"),b.mc(5),b.Yb(6,"uppercase"),b.Mb(),b.Mb(),b.Mb(),b.lc(7,x,56,36,"ion-content",2)),2&i&&(b.zb(5),b.nc(b.Zb(6,2,"Ingresar Ayuda")),b.zb(2),b.dc("ngIf",o.contribucion))},directives:[c.q,c.I,c.g,c.c,c.d,c.H,e.k,c.n,c.h,c.i,c.F,c.u,c.t,c.v,c.o,c.O,n.i,n.f,n.g,c.D,e.j,c.f,c.N,r.h,c.r,c.s,c.L,c.G,c.P,n.b,c.E],pipes:[e.n],styles:[".field-item[_ngcontent-%COMP%]:not(:first-child){margin-top:1.5rem}.field-label[_ngcontent-%COMP%]{margin-right:2rem}"]}),i})()}];let S=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=b.Ib({type:i}),i.\u0275inj=b.Hb({imports:[[r.i.forChild(E)],r.i]}),i})(),D=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=b.Ib({type:i}),i.\u0275inj=b.Hb({imports:[[e.b,n.a,c.J,S]]}),i})()}}]);